trigger:
  branches:
    exclude:
      - release
      - dev

pool:
  vmImage: 'ubuntu-20.04'

container: kaiiz3n/books-api-base:latest

steps:
- script: |
    pip install pytest
    pip install pytest-cov
    python -m pytest tests --doctest-modules --junitxml=junit/test-results.xml --cov=. --cov-report=xml --cov-report=html
  env:
    PYTHONPATH: $(Build.SourcesDirectory)
  displayName: 'Run Tests'
